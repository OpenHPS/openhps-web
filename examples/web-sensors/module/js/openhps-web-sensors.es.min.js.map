{"version":3,"file":"web/openhps-web-sensors.es.min.js","mappings":"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","sources":["webpack://@openhps/web-sensors/external module \"./openhps-core.es.min.js\"","webpack://@openhps/web-sensors/./dist/esm/web/SensorSourceNode.js","webpack://@openhps/web-sensors/./dist/esm/legacy/SensorSourceNode.js","webpack://@openhps/web-sensors/./dist/esm/index.js","webpack://@openhps/web-sensors/webpack/bootstrap","webpack://@openhps/web-sensors/webpack/runtime/define property getters","webpack://@openhps/web-sensors/webpack/runtime/harmony module decorator","webpack://@openhps/web-sensors/webpack/runtime/hasOwnProperty shorthand","webpack://@openhps/web-sensors/webpack/startup"],"sourcesContent":["var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"AbsoluteOrientationSensor\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.AbsoluteOrientationSensor, [\"Acceleration\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.Acceleration, [\"Accelerometer\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.Accelerometer, [\"AngularVelocity\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.AngularVelocity, [\"AngularVelocityUnit\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.AngularVelocityUnit, [\"DataFrame\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.DataFrame, [\"DataObject\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.DataObject, [\"Gyroscope\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.Gyroscope, [\"LinearAccelerationSensor\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.LinearAccelerationSensor, [\"Magnetism\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.Magnetism, [\"Magnetometer\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.Magnetometer, [\"Orientation\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.Orientation, [\"Quaternion\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.Quaternion, [\"RelativeOrientationSensor\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.RelativeOrientationSensor, [\"SourceNode\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.SourceNode, [\"TimeService\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.TimeService });","/// <reference types=\"web\" />\r\nimport { SourceNode, Acceleration, Orientation, TimeService, Quaternion, DataFrame, LinearAccelerationSensor as LinearAccelerationSensorObject, AbsoluteOrientationSensor as AbsoluteOrientationSensorObject, RelativeOrientationSensor as RelativeOrientationSensorObject, Magnetometer as MagnetometerObject, Gyroscope as GyroscopeObject, Accelerometer as AccelerometerObject, AngularVelocity, AngularVelocityUnit, Magnetism, } from '@openhps/core';\r\n/**\r\n * Sensor source node using Web Sensor API.\r\n */\r\nexport class SensorSourceNode extends SourceNode {\r\n    constructor(options) {\r\n        super(options);\r\n        this._subscriptions = new Map();\r\n        this._values = new Map();\r\n        this._lastPush = 0;\r\n        this._running = false;\r\n        this.options.interval = this.options.interval || 100;\r\n        if (this.options.autoStart) {\r\n            this.once('build', this.start.bind(this));\r\n        }\r\n        this.once('destroy', this.stop.bind(this));\r\n    }\r\n    requestPermission() {\r\n        return new Promise((resolve, reject) => {\r\n            Promise.all(this.options.sensors\r\n                .map((sensor) => this.getPermissions(sensor).map((permission) => navigator.permissions.query({ name: permission })))\r\n                .reduce((a, b) => [...a, ...b]))\r\n                .then((results) => {\r\n                if (results.every((result) => result.state === 'granted')) {\r\n                    resolve();\r\n                }\r\n                else {\r\n                    reject(new Error(`No permission to use the required sensors!`));\r\n                }\r\n            })\r\n                .catch(reject);\r\n        });\r\n    }\r\n    start() {\r\n        return new Promise((resolve) => {\r\n            this._running = true;\r\n            if (this._subscriptions.size > 0) {\r\n                return resolve();\r\n            }\r\n            this.options.sensors.forEach((sensor) => {\r\n                const SensorType = this.findSensor(sensor);\r\n                const sensorInstance = new SensorType({\r\n                    frequency: Math.round(1000 / this.options.interval),\r\n                });\r\n                sensorInstance.addEventListener('reading', (value) => {\r\n                    if (!this._running)\r\n                        return;\r\n                    this._values.set(sensor, value);\r\n                    if (this._isUpdated()) {\r\n                        this._lastPush = TimeService.now();\r\n                        this.createFrame().catch((ex) => {\r\n                            this.logger('error', 'Unable to create sensor data frame!', ex);\r\n                        });\r\n                    }\r\n                });\r\n                sensorInstance.start();\r\n                this._subscriptions.set(sensor, sensorInstance);\r\n            });\r\n            resolve();\r\n        });\r\n    }\r\n    _isUpdated() {\r\n        return (Array.from(this._values.values()).filter((sensor) => sensor.timestamp > this._lastPush).length ===\r\n            this.options.sensors.length);\r\n    }\r\n    stop() {\r\n        return new Promise((resolve) => {\r\n            if (this.options.softStop) {\r\n                this._running = false;\r\n            }\r\n            else {\r\n                this._subscriptions.forEach((value) => value.stop());\r\n                this._subscriptions = new Map();\r\n                this._values = new Map();\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n    createFrame() {\r\n        return new Promise((resolve) => {\r\n            const dataFrame = new DataFrame();\r\n            dataFrame.source = this.source;\r\n            const acceleration = this._values.get(AccelerometerObject);\r\n            const linearAcceleration = this._values.get(LinearAccelerationSensorObject);\r\n            const gyroscope = this._values.get(GyroscopeObject);\r\n            const orientation = this._values.get(AbsoluteOrientationSensorObject);\r\n            const relativeOrientation = this._values.get(RelativeOrientationSensorObject);\r\n            const magnetometer = this._values.get(MagnetometerObject);\r\n            const sourceUID = this.source ? this.source.uid : this.uid;\r\n            const frequency = 1000 / this.options.interval;\r\n            if (acceleration) {\r\n                dataFrame.addSensor(new AccelerometerObject(sourceUID + '_accel', new Acceleration(acceleration.x, acceleration.y, acceleration.z), frequency));\r\n            }\r\n            if (linearAcceleration) {\r\n                dataFrame.addSensor(new LinearAccelerationSensorObject(sourceUID + '_linearaccel', new Acceleration(linearAcceleration.x, linearAcceleration.y, linearAcceleration.z), frequency));\r\n            }\r\n            if (gyroscope) {\r\n                dataFrame.addSensor(new GyroscopeObject(sourceUID + '_gyro', new AngularVelocity(gyroscope.x, gyroscope.y, gyroscope.z, AngularVelocityUnit.RADIAN_PER_SECOND), frequency));\r\n            }\r\n            if (orientation) {\r\n                dataFrame.addSensor(new AbsoluteOrientationSensorObject(sourceUID + '_absoluteorientation', Orientation.fromQuaternion(new Quaternion(...orientation.quaternion)), frequency));\r\n            }\r\n            if (relativeOrientation) {\r\n                dataFrame.addSensor(new RelativeOrientationSensorObject(sourceUID + '_relativeorientation', Orientation.fromQuaternion(new Quaternion(...relativeOrientation.quaternion)), frequency));\r\n            }\r\n            if (magnetometer) {\r\n                dataFrame.addSensor(new MagnetometerObject(sourceUID + '_mag', new Magnetism(magnetometer.x, magnetometer.y, magnetometer.z), frequency));\r\n            }\r\n            this.push(dataFrame);\r\n            resolve();\r\n        });\r\n    }\r\n    onPull() {\r\n        return new Promise((resolve) => {\r\n            resolve(undefined);\r\n        });\r\n    }\r\n    findSensor(sensor) {\r\n        switch (sensor) {\r\n            case RelativeOrientationSensorObject:\r\n                return RelativeOrientationSensor;\r\n            case AbsoluteOrientationSensorObject:\r\n                return AbsoluteOrientationSensor;\r\n            case LinearAccelerationSensorObject:\r\n                return LinearAccelerationSensor;\r\n            // case SensorType.AMBIENT_LIGHT:\r\n            //     return AmbientLightSensor;\r\n            case GyroscopeObject:\r\n                return Gyroscope;\r\n            case MagnetometerObject:\r\n                return Magnetometer;\r\n            case AccelerometerObject:\r\n                return Accelerometer;\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n    getPermissions(sensor) {\r\n        switch (sensor) {\r\n            // case SensorType.AMBIENT_LIGHT:\r\n            //     return [\"ambient-light-sensor\"];\r\n            case RelativeOrientationSensorObject:\r\n            case AbsoluteOrientationSensorObject:\r\n                return ['gyroscope', 'accelerometer', 'magnetometer'];\r\n            case GyroscopeObject:\r\n                return ['gyroscope'];\r\n            case MagnetometerObject:\r\n                return ['magnetometer'];\r\n            case LinearAccelerationSensorObject:\r\n            case AccelerometerObject:\r\n                return ['accelerometer'];\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=SensorSourceNode.js.map","import { Acceleration, AngularVelocity, DataFrame, Orientation, SourceNode, AbsoluteOrientationSensor as AbsoluteOrientationSensorObject, Gyroscope as GyroscopeObject, Accelerometer as AccelerometerObject, DataObject, } from '@openhps/core';\r\n/**\r\n * IMU source using the HTML5 browser API for device motion and device orientation.\r\n *\r\n * @category Source node\r\n */\r\nexport class SensorSourceNode extends SourceNode {\r\n    constructor(options) {\r\n        var _a;\r\n        super(options);\r\n        this.options.source = (_a = this.options.source) !== null && _a !== void 0 ? _a : new DataObject(this.uid);\r\n        if (this.options.autoStart) {\r\n            this.once('build', this.start.bind(this));\r\n        }\r\n        this.once('destroy', this.stop.bind(this));\r\n    }\r\n    requestPermission() {\r\n        return Promise.resolve();\r\n    }\r\n    start() {\r\n        return new Promise((resolve) => {\r\n            const sensorUID = this.source ? this.source.uid : this.uid;\r\n            window.addEventListener('devicemotion', (event) => {\r\n                // Create a new data frame for the orientation change\r\n                const dataFrame = new DataFrame();\r\n                const frequency = 1000 / event.interval;\r\n                dataFrame.addSensor(new AccelerometerObject(sensorUID + '_accl', new Acceleration(event.accelerationIncludingGravity.x, event.accelerationIncludingGravity.y, event.accelerationIncludingGravity.z), frequency));\r\n                dataFrame.addSensor(new GyroscopeObject(sensorUID + '_gyro', new AngularVelocity(event.rotationRate.beta, event.rotationRate.gamma, event.rotationRate.alpha), frequency));\r\n                dataFrame.addSensor(new AccelerometerObject(sensorUID + '_linearaccl', new Acceleration(event.acceleration.x, event.acceleration.y, event.acceleration.z), frequency));\r\n                const source = this.source;\r\n                source.getPosition().angularVelocity = dataFrame.getSensor(GyroscopeObject).value;\r\n                dataFrame.addSensor(new AbsoluteOrientationSensorObject(sensorUID + '_orientation', source.getPosition().orientation));\r\n                dataFrame.source = source;\r\n                this.push(dataFrame);\r\n            }, true);\r\n            window.addEventListener('deviceorientation', (event) => {\r\n                const source = this.source;\r\n                source.getPosition().orientation = Orientation.fromEuler([event.beta, event.gamma, event.alpha]);\r\n            });\r\n            this.logger('debug', 'Browser orientation and motion events registered!');\r\n            resolve();\r\n        });\r\n    }\r\n    stop() {\r\n        return Promise.resolve();\r\n    }\r\n    onPull() {\r\n        return new Promise((resolve) => {\r\n            resolve(undefined);\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=SensorSourceNode.js.map","import { SensorSourceNode } from './web/SensorSourceNode';\r\nimport { SensorSourceNode as SensorSourceNodeLegacy } from './legacy/SensorSourceNode';\r\nmodule.exports = ('Accelerometer' in window ? { SensorSourceNode } : { SensorSourceNode: SensorSourceNodeLegacy });\r\n//# sourceMappingURL=index.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(229);\n"],"names":["y","x","__webpack_require__","d","__WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__","AbsoluteOrientationSensor","Acceleration","Accelerometer","AngularVelocity","AngularVelocityUnit","DataFrame","DataObject","Gyroscope","LinearAccelerationSensor","Magnetism","Magnetometer","Orientation","Quaternion","RelativeOrientationSensor","SourceNode","TimeService","SensorSourceNode","constructor","options","super","this","_subscriptions","Map","_values","_lastPush","_running","interval","autoStart","once","start","bind","stop","requestPermission","Promise","resolve","reject","all","sensors","map","sensor","getPermissions","permission","navigator","permissions","query","name","reduce","a","b","then","results","every","result","state","Error","catch","size","forEach","sensorInstance","findSensor","frequency","Math","round","addEventListener","value","set","_isUpdated","createFrame","ex","logger","Array","from","values","filter","timestamp","length","softStop","dataFrame","source","acceleration","get","linearAcceleration","gyroscope","orientation","relativeOrientation","magnetometer","sourceUID","uid","addSensor","z","quaternion","push","onPull","undefined","_a","sensorUID","window","event","accelerationIncludingGravity","rotationRate","beta","gamma","alpha","getPosition","angularVelocity","getSensor","exports","__webpack_module_cache__","moduleId","cachedModule","module","id","loaded","__webpack_modules__","definition","key","o","Object","defineProperty","enumerable","hmd","create","children","obj","prop","prototype","hasOwnProperty","call"],"sourceRoot":""}